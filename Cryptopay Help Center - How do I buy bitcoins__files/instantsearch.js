"use strict";!function(t,e){var n;$.throttle=n=function(t,n,r,i){function a(){function a(){c=+new Date,r.apply(l,s)}var l=this,u=+new Date-c,s=arguments;i&&!o&&a(),o&&clearTimeout(o),i===e&&u>t?a():!0!==n&&(o=setTimeout(i?function(){o=e}:a,i===e?t-u:t))}var o,c=0;return"boolean"!=typeof n&&(i=r,r=n,n=e),$.guid&&(a.guid=r.guid=r.guid||$.guid++),a},$.debounce=function(t,r,i){return i===e?n(t,r,!1):n(t,i,!1!==r)}}(),$(function(){var t=$("#instant-search"),e=$("#hits");if(!(t.length<1||e.length<1)){var n=$("body").data("languageCode");"undefined"===n&&(n=void 0);$("body").data("defaultLanguageCode");var r=$("body").data().homePath||"";1!==r.length&&"undefined"!==r||(r=""),r=r.replace(/\/l\/\w+/gi,"");var i="/search/",a="/_hd/quicksearch";n&&(i="/l/"+n+i,a="/l/"+n+a),i=r+i,a=r+a;var o=$("body").data("searchPlaceholder"),c=$("body").data("noArticlesFoundString")||"No articles found";0===t.find("input").length&&t.html('\n        <form>\n          <input id="hd-query" placeholder="'+o+'" />\n        </form>\n      ');var l=t.find("input"),u=t.find("form"),s=$("body").data().searchTerm,d=s&&"undefined"!==s?s:void 0;d&&t.find("input").val(d),t.find("input").removeAttr("disabled").attr("autocomplete","off").attr("autocorrect","off").attr("autocapitalize","off"),0===$(window).scrollTop()&&t.find("input").focus(),u.submit(function(t){t.preventDefault();var e=l.val()||" ";return window.HDAnalytics?window.HDAnalytics.recordSearch(e,function(){window.location.href=i+encodeURI(e)}):(window.location.href=i+encodeURI(e),!0)});var f=$.debounce(3e3,function(t,e,n){window.HDAnalytics&&window.HDAnalytics.recordSearchWithHits(t,e,n,function(t){t&&console.log(t)})}),h=function(){$("#hits").html(""),$("#searchresults").hide(),$("#toc").show(),$("#sidebar").show(),$("#top-articles-container").show()},v=$("#search-container .fa").attr("class"),p=function(){return $("#search-container .fa").addClass("fa-circle-o-notch fa-spin fa-fw")},m=function(){return $("#search-container .fa").attr("class",v)},g=[],w=function(t){for(;;){var e=g.shift();if(!e||e.query===t)break;if(e.search&&"function"==typeof e.search.abort&&e.search.abort(),0===g.length)break}0===g.length&&m()},y=function(t){$("#hits").html(t),$("#searchresults").show(),$("#toc").hide(),$("#sidebar").hide(),$("#top-articles-container").hide()},b=function(t){var e=$.ajax({method:"GET",url:a,data:{query:t}});return g.push({query:t,search:e}),e},_=$.throttle(500,function(t){if(0===t.length)return w(""),h();p(),b(t).success(function(e){var n=e.articles,r=void 0===n?[]:n,i=e.totalHits,a=(e.maxScore,e.stemmedQuery);w(t);var o=0===r.length?c:r.map(function(t){return'\n      <div class="row">\n        <div class="col-xs">\n          <div id="article" class="article">\n            <a class="article-link" data-article-id="{{article_id}}" href="{{relative_url}}">\n              <h3 class="article-title">{{title}}</h3>\n            </a>\n            <p class="article-description">{{description}}</p>\n            <hr>\n          </div>\n        </div>\n      </div>\n    '.replace("{{article_id}}",t.article_id).replace("{{relative_url}}",t.relative_url).replace("{{title}}",t.title).replace("{{description}}",t.description)}).join("\n");return y(o),f(a,i,t)}).error(function(t){return h()})});l.keyup(function(t){var e=t.target.value;return _(e)});var k=$("form#contact-form #question");if(k){k.parent().after('\n        <fieldset class="form-group">\n          <ul class="ticket-deflection-results">\n          </ul>\n        </fieldset>\n      ');var D=$(".ticket-deflection-results"),H=$.throttle(500,function(t){b(t).success(function(e){var n=e.articles,r=void 0===n?[]:n;e.totalHits,e.maxScore,e.stemmedQuery;w(t);var i=0===r.length?"":r.map(function(t){return'\n      <li class="ticket-deflection-result">\n        <a href={{relative_url}}>\n          {{title}}\n        </a>\n      </li>\n    '.replace("{{relative_url}}",t.relative_url).replace("{{title}}",t.title)}).join("\n");return D.html(i)}).error(function(t){return D.html("")})});k.on("keyup",function(t){var e=$(t.target).val()||"";return 0===e.length?(w(""),D.html("")):H(e)})}window.hd_instant_search=function(){}}});