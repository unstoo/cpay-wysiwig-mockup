"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var _slicedToArray=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&i.return&&i.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};$(function(){var e=function(e){var t=Object.assign({},e);return Object.keys(t).forEach(function(e){void 0!==t[e]&&"undefined"!==t[e]||delete t[e]}),t},t=function(e){if(""===e)return{};for(var t={},n=0;n<e.length;n+=1){var r=e[n].split("=",2);1===r.length?t[r[0]]="":t[r[0]]=decodeURIComponent(r[1].replace(/\+/g," "))}return t}(window.location.search.substr(1).split("&")),n=_extends({homePath:"",seeMoreResultsString:"See more results",thanksString:"Got it!"},e(_extends({},$("body").data(),{thanksString:$("#feedback").data("thanks")}))),r=_extends({current_page:n.searchTerm?"search":n.articleId?"article":n.categoryId?"category":"home",search_container_selector:"#search",search_query_selector:".query",disable_legacy_search_timers:!1,enable_syntax_highlighting:!0,enable_contact_form:!0,enable_live_chat_integrations:!0,focus_on_query:"auto"},window.hd_util_params||{});r.search_container_selectors=Array.isArray(r.search_container_selector)?r.search_container_selector:[r.search_container_selector],delete r.search_container_selector;var o=1===n.homePath.length?"":n.homePath.replace(/\/l\/\w+/gi,"");delete n.homePath;var a="/search/",c="/quicksearch";n.languageCode&&(a="/l/"+n.languageCode+a,c="/l/"+n.languageCode+c),a=o+a,c=o+c;var i=window.HDAnalytics.tokens(),s={},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"positive";window.HDAnalytics.leaveFeedback(e),$("#feedback").html('\n        <div class="thanks">\n          <i class="fa fa-2x fa-check"></i>\n          '+n.thanksString+"\n        </div>\n      ")};s.initArticleFeedbackHandlers=function(){$("#feedback .feedback-positive").click(function(){return l("positive")}),$("#feedback .feedback-neutral").click(function(){return l("neutral")}),$("#feedback .feedback-negative").click(function(){return l("negative")})},s.enableSyntaxHighlighting=function(){return $("pre").each(function(e,t){window.hljs&&window.hljs.highlightBlock(t)})},s.focusOnQuery=function(){return $(r.search_query_selector).focus()},s.getSearchTerm=function(){var e=r.search_container_selectors.map(function(e){return $(e+" input").val()}).filter(function(e){return"string"==typeof e&&e.length>0}),t=_slicedToArray(e,1)[0];return void 0===t?"":t},s.initSearchTimers=function(){var e=void 0,t=void 0;r.search_container_selectors.forEach(function(e){return $(e+" form").submit(function(e){e.preventDefault();var n=$(e.currentTarget).find("input").val()||" ";return t?(clearTimeout(t),!!window.HDAnalytics&&window.HDAnalytics.recordSearch(n,function(){return window.location.href=a+encodeURI(n),!0})):(window.location.href=a+encodeURI(n),!0)})}),$(window).unload(function(){if(t){clearTimeout(t);var e=s.getSearchTerm();e&&window.HDAnalytics&&window.HDAnalytics.recordSearch(e,function(){})}}),$(r.search_query_selector).blur(function(e){return setTimeout(function(){return $(e.currentTarget).find(".search-results").html("").hide()},250)}),$(r.search_query_selector).keyup(function(){e&&clearTimeout(e),t&&clearTimeout(t);var r=s.getSearchTerm();return r.length<=3?($(".search-results").html("").hide(),!1):(e=setTimeout(function(){$.ajax({method:"GET",url:c,data:{query:r}}).success(function(e){var t=n.languageCode?"/l/"+n.languageCode:"",a=""+o+t+"/search/"+encodeURI(r),c=[].concat(_toConsumableArray(e.articles.map(function(e){var n=e.article_id,r=e.slug,a=e.relative_url,c=e.title,i=a||""+o+t+"/article/"+n+"-"+r;return $('\n                    <li>\n                      <a\n                        class="search-result-article"\n                        data-article-id="'+n+'"\n                        href="'+i+'"\n                      >\n                        '+c+"\n                      </a>\n                    </li>\n                  ")})),[$('\n                  <li>\n                    <a href="'+a+'">\n                      '+n.seeMoreResultsString+"\n                    </a>\n                  </li>\n                ")]);$(".search-results").html("").append(c).show(),$(".search-result-article").click(function(e){e.preventDefault();var t=$(e.currentTarget),n=t.data("articleId"),r=t.attr("href"),o=s.getSearchTerm();return!!window.HDAnalytics&&window.HDAnalytics.recordSearchClick(o,n,function(){return window.location.href=r,!0})})}).error(function(e){$(".search-results").html("<li>Uh oh, something went wrong.</li>").show(),console.log(e)})},500),t=setTimeout(function(){return window.HDAnalytics?window.HDAnalytics.recordSearch(r,function(){return t=void 0,!0}):(t=void 0,!1)},5e3),!0)})},s.initContactModalListener=function(){$("#contact-modal").on("shown.bs.modal",function(){return $("#contact-modal #email").focus()}),$("#contact-form").on("submit",function(e){if(($("#contact-form #noop").val()||"").length>0)return e.preventDefault(),$("#contact-modal #contact-form-submit").html('<i class="fa fa-times"></i>'),console.log("Something phishy's going on")}),$("#contact-form-submit").click(function(){var t=$("#contact-form #email").val(),r=$("#contact-form #question").val();if(($("#contact-form #noop").val()||"").length>0)return $("#contact-modal #contact-form-submit").html('<i class="fa fa-times"></i>'),console.log("Something phishy's going on");var a=e({article_id:$("#contact-form").data("articleId"),category_id:$("#contact-form").data("categoryId"),search_term:$("#contact-form").data("searchTerm"),source:"modal",language_code:n.languageCode,page:window.location.href,referrer:document.referrer});if(!t||!r)return console.log("Missing values");if(-1===t.indexOf("@")||-1===t.indexOf(".")||t.lastIndexOf("@")!==t.indexOf("@")||t.lastIndexOf(".")<t.indexOf("@"))return console.log("Email address not valid");var c=$("#contact-modal #contact-form-submit").html();return $("#contact-modal #contact-form-submit").html('\n          <i class="fa fa-spinner fa-spin fa-fw"></i>\n          <span class="sr-only">Loading...</span>\n        '),$("#contact-modal #contact-form-submit").attr("disabled","disabled"),$.ajax({method:"POST",url:o+"/contact",data:{from:t,message:r}}).success(function(){$.ajax({method:"POST",url:o+"/analytics/contact",data:_extends({},a,{user_token:i.user,session_token:i.session})}),$("#contact-modal #contact-form-submit").html('<i class="fa fa-check"></i>'),setTimeout(function(){$("#contact-modal input").val(""),$("#contact-modal textarea").val(""),$("#contact-modal .ticket-deflection-results").html(""),$("#contact-modal #contact-form-submit").html(c),$("#contact-modal #contact-form-submit").removeAttr("disabled"),$("#contact-modal").modal("hide")},2e3)}).error(function(e){console.log(e),$("#contact-modal #contact-form-submit").html('<i class="fa fa-times"></i>'),setTimeout(function(){$("#contact-modal #contact-form-submit").html(c),$("#contact-modal #contact-form-submit").removeAttr("disabled")},2e3)}),!0})};var u=function(t){var r=e({article_id:$("#contact-form").data("articleId"),category_id:$("#contact-form").data("categoryId"),search_term:$("#contact-form").data("searchTerm"),source:t,language_code:n.languageCode,page:window.location.href,referrer:document.referrer,user_token:i.user,session_token:i.session});return $.ajax({method:"POST",url:o+"/analytics/contact",data:r})};switch(s.initLiveChatHandlers=function(){return setTimeout(function(){window.Intercom&&window.Intercom("onShow",function(){return u("intercom")}),window.doorbellOptions&&(window.doorbellOptions.onSuccess=function(){return u("doorbell")}),window.Smooch&&window.Smooch.on("message:sent",function(){return u("smooch")}),window.$crisp&&window.$crisp.on("message:sent",function(){return u("crisp")}),window.Belco&&window.Belco("on","started-conversation",function(){return u("belco")}),window.drift&&window.drift.on("ready",function(){window.drift.on("startConversation",function(){return u("drift")})}),window.__lc&&(window.LC_API||(window.LC_API={}),window.LC_API.on_chat_started=function(){return u("livechat")}),window.Kommunicate&&document.getElementById("mck-msg-new").addEventListener("click",function(){return u("kommunicate")})},500)},s.initSearchClickHandler=function(){$("#searchresults a.card-link").click(function(e){e.preventDefault();var t=$(e.currentTarget),n=t.data("articleId"),r=t.attr("href");return window.HDAnalytics?window.HDAnalytics.recordSearchClick(null,n,function(e){return e?console.log(e):(window.location.href=r,!0)}):(window.location.href=r,!0)})},s.setForwardUrl=function(){return $("#forward").val(t.forward)},s.initPasswordResetHandler=function(){var e=$(".reset"),t=$("input#email");$("input#email").on("keyup",function(){var n=e.is(":visible"),r=t.val(),o=r&&r.length&&r.lastIndexOf(".")>r.lastIndexOf("@");!n&&o&&e.show(),n&&!o&&e.hide()}),e.on("click",function(){e.css("cursor","loading"),$.ajax({url:o+"/reset?email="+t.val(),method:"GET"}).success(function(){return e.html("Sent password reset").css("cursor","none").css("color","green")}).error(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.message,r=void 0===n?"Something went wrong":n;console.log(t),e.html(r).css("cursor","none").css("color","red !important")})})},r.current_page){case"article":s.initArticleFeedbackHandlers(),r.enable_syntax_highlighting&&s.enableSyntaxHighlighting();break;case"search":s.initSearchClickHandler();break;case"login":s.initPasswordResetHandler(),s.setForwardUrl();break;case"teamlogin":s.setForwardUrl()}switch(r.focus_on_query){case"always":s.focusOnQuery();break;case"auto":0===$(window).scrollTop()&&s.focusOnQuery()}r.disable_legacy_search_timers||s.initSearchTimers(),r.enable_contact_form&&s.initContactModalListener(),r.enable_live_chat_integrations&&s.initLiveChatHandlers(),window.HDUtils=s});